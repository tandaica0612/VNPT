@{ Layout = "~/Views/Shared/_LayoutByNhanVien.cshtml"; ViewData["Title"] = Model.AM_PhieuYeuCauDataTransfer.TieuDe + " - Kết quả"; }

@model VNPT.CRM.Models.AM_PhieuYeuCauViewModel

<div class="row">
    <div class="col s12">
        <div class="card card-tabs">
            <div class="card-content">
                <div class="card-title">
                    <div class="row">
                        <div class="col s12 m12 l12">
                            <h5><b>@Model.AM_PhieuYeuCauDataTransfer.TieuDe - @Model.NguoiTao.FullName - @Model.AM_PhieuYeuCauDataTransfer.NgayTao.Value.ToString("dd/MM/yyyy HH:mm:ss")</b></h5>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col s12 m4 l4">
                        <div class='form-group'>
                            <label for='AM_PhieuYeuCauDataTransfer_SoLuongHoaDon' style="font-weight:unset;">Số lượng hóa đơn: </label>
                            <b>@Model.AM_PhieuYeuCauDataTransfer.SoLuongHoaDon</b>
                        </div>
                    </div>
                    <div class="col s12 m4 l4">
                        <div class='form-group'>
                            <label for='AM_PhieuYeuCauDataTransfer_NgonNgu' style="font-weight:unset;">Ngôn ngữ: </label>
                            <b>@Model.AM_PhieuYeuCauDataTransfer.NgonNgu</b>
                        </div>
                    </div>
                    <div class="col s12 m4 l4">
                        <div class='form-group'>
                            <label for='AM_PhieuYeuCauDataTransfer_HeThong' style="font-weight:unset;">Hệ thống: </label>
                            <b>@Model.AM_PhieuYeuCauDataTransfer.HeThong</b>
                        </div>
                    </div>
                    <div class="col s12 m4 l4">
                        <div class='form-group'>
                            <label for='AM_PhieuYeuCauDataTransfer_KyHieu' style="font-weight:unset;">Ký hiệu: </label>
                            <b>@Model.AM_PhieuYeuCauDataTransfer.KyHieu</b>
                        </div>
                    </div>
                    <div class="col s12 m4 l4">
                        <div class='form-group'>
                            <label for='AM_PhieuYeuCauDataTransfer_MauSo' style="font-weight:unset;">Mẫu số: </label>
                            <b>@Model.AM_PhieuYeuCauDataTransfer.MauSo</b>
                        </div>
                    </div>
                    <div class="col s12 m4 l4">
                        <div class='form-group'>
                            <label for='AM_PhieuYeuCauDataTransfer_MauHoaDon' style="font-weight:unset;">Mẫu hóa đơn: </label>
                            <b>@Model.AM_PhieuYeuCauDataTransfer.MauHoaDon</b>
                        </div>
                    </div>
                    <div class="col s12 m12 l12">
                        <div class='form-group'>
                            <label for='Membership_FullName' style="font-weight:unset;">Khách hàng: </label>
                            <a target="_blank" href="/Membership/CustomerDetail001?ID=@Model.Membership.ID"><b>@Model.Membership.FullName</b></a>
                        </div>
                    </div>
                    <div class="col s12 m12 l12">
                        <div class='form-group'>
                            <label for='Data'>File đính kèm</label>
                            <div id="Data"></div>
                        </div>
                    </div>
                    <div class="col s12 m12 l12">
                        <div class='form-group'>
                            <hr />
                            @Html.Raw(Model.AM_PhieuYeuCauDataTransfer.NoiDung);
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<form method="post" enctype="multipart/form-data" asp-action="Update" asp-controller="AM_PhieuYeuCau">
    @Html.HiddenFor(Model => Model.AM_PhieuYeuCauDataTransfer.ID)    
    <div class="row">
        <div class="col s12">
            <div class="card card-tabs">
                <div class="card-content">
                    <div class="card-title">
                        <div class="row">
                            <div class="col s12 m6 l10">
                                <h5><b>@Model.AM_PhieuYeuCauDataTransfer.TieuDe - Kết quả</b></h5>
                            </div>
                            <div class="col s12 m6 l2">
                                <ul class="tabs">
                                    <li class="tab col s12">
                                        <button type="submit" title="Save" style="height:46px; padding-top:6px; color:#ffffff;" class="waves-effect waves-light btn gradient-45deg-light-blue-cyan z-depth-1 border-round">
                                            <i class="material-icons">save</i>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <hr />
                    <div class="row">
                        <div class="col s12 m3 l3">
                            <label>
                                @(Html.CheckBoxFor(Model => Model.AM_PhieuYeuCauDataTransfer.DaNhan001))
                                <span>Đã tiếp nhận</span>
                            </label>
                        </div>
                        <div class="col s12 m3 l3">
                            <label>
                                @(Html.CheckBoxFor(Model => Model.AM_PhieuYeuCauDataTransfer.DangXuLy001))
                                <span>Đang xử lý</span>
                            </label>
                        </div>
                        <div class="col s12 m3 l3">
                            <label>
                                @(Html.CheckBoxFor(Model => Model.AM_PhieuYeuCauDataTransfer.HoanThanh001))
                                <span>Hoàn thành</span>
                            </label>
                        </div>
                        <br />
                        <br />
                        <div class="col s12 m12 l12">
                            <div class='form-group'>
                                @Html.TextAreaFor(Model => Model.AM_PhieuYeuCauDataTransfer.KetQua)
                            </div>
                            <script src="/ckeditor/ckeditor.js"></script>
                            <script src="/ckeditor/adapters/jquery.js"></script>
                            <script>
                                CKEDITOR.replace("AM_PhieuYeuCauDataTransfer_KetQua", {
                                    on: {
                                        'instanceReady': function (evt) {
                                            evt.editor.resize("100%", "500");
                                        }
                                    }
                                });</script>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<script>

    $(document).ready(() => {
         onGetDinhKemByIDToListToJSON();
    });
    function onGetDinhKemByIDToListToJSON() {
        $("#Data").html('');
        var IDValue = $("#AM_PhieuYeuCauDataTransfer_ID").val();
         $.ajax({
            type: 'GET',
            url: "@Url.Action("GetDinhKemByPhieuYeuCauIDToListJSON", "AM_PhieuYeuCau")",
            data: {
                ID: IDValue,
            },
             success: function (list) {
                 var html = '';
                 for (var index in list) {
                     $(list[index]).each(function (iRec, item) {
                         html = html + '<a target="_blank" href="' + item.URL + '" title="' + item.URL + '">' + item.Title + '</a> | ';
                    });
                }
                html = $.parseHTML(html);
                 $("#Data").append(html);
            }
        }).done(() => {
        });
    }
</script>
